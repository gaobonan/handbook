# 训练监控管理

训练监控通过将Tensorboard集成与JupyterLab实现， **需要使用控制台启动对应镜像**。

日志生成需要修改训练代码，如跟踪训练精度一般**只需添加三至五行代码**即可实现。

## 启动训练监控工作台

新建工作台 - 选择公开镜像 ava-monitor:cpu - 选择 CPU套餐 (1 Core, 6G)

![](/images/ch-05/5.2.3/monitor-image-selection.png)


启动后选择工作台JupyterLab模式，Lab中会出现Tensorboard扩展应用，点击图标后将以JupyterLab当前目录为日志查询地址。

如果想要指定，可以通过Commands - Create a new tensorboard完成，**此处根目录为JupyterLab的Home，一般为/workspace/mnt/group/ 中的个人目录**。

可以将日志保存至**个人目录下**，或者**使用ln指令创建日志目录链接到JupyterLab可感知目录下**，指令实例在本指南最下方。

![](/images/ch-05/5.2.3/monitor-jupyterlab.png)


如Log文件夹指定无误，Tensorboard将正常显示Log，Log支持实时更新：

![](/images/ch-05/5.2.3/monitor-gui.png)


## 生成日志文件

各框架生成日志文件的方式**与Tensorflow基本一致**，并通过对应库文件生成统一格式的日志文件。

各框架对应库：
+ MXNet: MXBoard
+ Pytorch: TensorboardX
+ Caffe: 暂时仍需转换为其他框架代码实现

### Tensorflow - Tensorboard

Github：https://github.com/tensorflow/tensorboard

参考教程：https://www.tensorflow.org/guide/summaries_and_tensorboard

参考实例 （MNIST）：https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/tutorials/mnist/mnist.py

### MXNET - MXBoard

GitHub：https://github.com/awslabs/mxboard

参考教程：https://medium.com/apache-mxnet/mxboard-mxnet-data-visualization-2eed6ae31d2c

参考实例：https://github.com/awslabs/mxboard/tree/master/examples/mnist

### Pytorch - TensorboardX

GitHub：https://github.com/lanpa/tensorboardX

参考教程：https://tensorboardx.readthedocs.io/en/latest/tutorial.html

参考实例：https://github.com/lanpa/tensorboardX/tree/master/examples

### 注意事项
1. **Tensorboard支持多日志文件夹同时显示**，将多份文件夹置于相同根文件夹下可以更好的对比结果。
2. 创建日志文件夹连接方法： `ln -s 日志存放目录 JupyterLab感知目录`，例如 `ln -s workspace/mnt/bucket/log_folder /workspace/mnt/group/username/link_log_folder`。